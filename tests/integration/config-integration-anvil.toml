# Integration test configuration for bloklid
# This configuration is used for integration testing with Docker Compose
# It connects to Anvil through the Docker network. 

# Directory for storing data files
data_directory = "/data"

# Network identifier - using "anvil-localhost" for local testing
network = "anvil-localhost"

# RPC endpoint URL - connects to Anvil service
rpc_url = "http://anvil:8546"

# Maximum number of RPC requests per second (0 for unlimited)
max_rpc_requests_per_sec = 0

# PostgreSQL database configuration
[database]
type = "postgresql"
url  = "postgresql://bloklid:bloklid_integration_test@postgres:5432/bloklid"

# Indexer configuration
[indexer]
# Disable fast sync for integration tests - we want to test normal startup
fast_sync = false

# Disable logs snapshot for integration tests
enable_logs_snapshot = false

# GraphQL subscription configuration
[indexer.subscription]
batch_size               = 50
event_bus_capacity       = 100
shutdown_signal_capacity = 10

# API server configuration
[api]
bind_address       = "0.0.0.0:8081"
enabled            = true
playground_enabled = true

[api.sse_keepalive]
enabled  = true
interval = "1s"
text     = "keep-alive"

# Health check configuration
[api.health]
# Allow higher lag for integration tests since we're starting from scratch
max_indexer_lag = 100
timeout         = "5s"
