{"id":"blokli-0rh","content_hash":"69cfc1fdde8e6f00e6bbc726892ee347400dfad6863040c9b4c0c76d7dfb5c7c","title":"use runtime-tokio by default always","description":"Configure the runtime-tokio feature to be used by default so it does not have to be specified explicitely for cargo on the CLI always.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-07T15:45:04.265162485+01:00","updated_at":"2025-11-07T15:45:04.265162485+01:00","source_repo":"."}
{"id":"blokli-0rm","content_hash":"d289277309f6ea7dd75bc14405ec370c99d97f8a106e09699ee5776ed21032af","title":"Update handler test documentation","description":"Document event capture pattern in handlers.rs test module. Add examples of using init_handlers_with_events(), document when to use try_recv_event() vs recv().await, add notes about is_synced parameter for event publication. See TODO.md for example documentation template. Estimated: 30 minutes.","status":"open","priority":4,"issue_type":"task","created_at":"2025-11-06T12:38:05.787103362+01:00","updated_at":"2025-11-06T12:38:05.787103362+01:00","source_repo":"."}
{"id":"blokli-0w4","content_hash":"a36330f861362c36b25ee2cb5659572a16bda7808dd940d55accf2aaac2ea792","title":"Update RpcOperationsConfig and RpcOperations","description":"Remove expected_block_time from config, add block_time_window_size and initial_block_time, initialize BlockTimeTracker in RpcOperations::new()","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-01T20:04:23.398793798+01:00","updated_at":"2025-12-01T20:04:23.398793798+01:00","source_repo":".","dependencies":[{"issue_id":"blokli-0w4","depends_on_id":"blokli-3ca","type":"blocks","created_at":"2025-12-01T20:04:26.029040628+01:00","created_by":"daemon"}]}
{"id":"blokli-3ca","content_hash":"aa60152403ad2c552479a083c364263c2b49a47e8d68c500d4b9be795cd0a294","title":"Create BlockTimeTracker module (chain/rpc/src/block_time_tracker.rs)","description":"Implement BlockTimeTracker struct with moving average calculation, VecDeque-based circular buffer, Arc\u003cRwLock\u003e wrapper for thread-safe access, and unit tests","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-01T20:04:23.391972761+01:00","updated_at":"2025-12-01T20:04:23.391972761+01:00","source_repo":"."}
{"id":"blokli-3s7","content_hash":"f57edf50003e3be08111378270a1fecbc4421d34e0e69f4fb612d037fd96f16d","title":"Update indexer polling logic","description":"Modify indexer.rs try_stream_logs() to use dynamic block_time_tracker instead of static expected_block_time","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-01T20:04:23.407225127+01:00","updated_at":"2025-12-01T20:04:23.407225127+01:00","source_repo":".","dependencies":[{"issue_id":"blokli-3s7","depends_on_id":"blokli-0w4","type":"blocks","created_at":"2025-12-01T20:04:26.037645703+01:00","created_by":"daemon"}]}
{"id":"blokli-3u1","content_hash":"40cbdfd01e23206dca6cfff86d249880c3eca1486bbb561bd6ae65516f5e942b","title":"Add gas price query and subscription to GraphQL API","description":"\nDESIGN: Gas Price Support\n\nSCHEMA CHANGES:\n- New Query: gasPrice: GasPriceResult!\n- New Subscription: gasPriceUpdated: GasPrice!\n- Types: GasPrice (baseFee, priorityFee, updatedAt), GasPriceResult union\n\nIMPLEMENTATION:\n- Store gas price in-memory only (no database persistence)\n- Indexer: Extract baseFeePerGas from block headers, cache in-memory\n- Indexer: Periodically fetch priorityFee from RPC\n- Indexer: Broadcast GasPriceUpdated events when values change\n- API Query: Read from in-memory cache, return QueryFailedError if not initialized\n- API Subscription: Emit current value as snapshot, stream subsequent updates\n- On restart: Gas price resets, clients get fresh data\n\nNO DATABASE CHANGES - data is too volatile to persist\n","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-01T20:09:45.381566467+01:00","updated_at":"2025-12-01T20:09:45.381566467+01:00","source_repo":"."}
{"id":"blokli-77w","content_hash":"d3e47aa715027fa866d9eec9831975045f996ec48ccab81648b70841aad1eddf","title":"native and hopr balance support","description":"The GraphQL API allows querying of hopr and native balances. This only makes sense to support for HOPR safes, HOPR node EOA accounts and the channels contract.\nEven then the amount of chain logs which would have to be stored is a lot. Thus blokli uses the following approach. \nDuring initial sync transfer logs (ERC20) and transfer transactions (native) are completely ignored. Once synched the indexer also subscribes to these events. \nInternally blokli keeps an in-memory set of addresses which combines all known HOPR safe addresses, EOA addresses and the channels contract address. \nOnce an ERC20 transfer event is being handled, it will check against this set of addresses. \nIf the address is known, the balance will be fetched from chain via the RPC (sync operation) and the result stored in the in-memory data structure. If a balance is fetched via the GraphQL API it will try to read the balance from the data structure. If the key is not present, an error will be returned. If the key (address) is present and no balance is known yet, it will be fetched directly from the RPC (sync operation), stored in the data structure and returned to the API caller. If the balance is known, it will be returned directly.\nA similar approach is taken for native transfers. For these the indexer\nsubscribes to new blocks and checks all transactions in a new block for known\naddresses. If a known address is found, the native balance is fetched from chain\nvia the RPC (sync operation) and the result stored in the in-memory data\nstructure. The GraphQL API behaves the same way as for ERC20 balances.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-06T14:32:00.707979111+01:00","updated_at":"2025-11-06T15:05:04.217358458+01:00","source_repo":"."}
{"id":"blokli-8em","content_hash":"ad888b0ddda942bab22ad15365b35992469edf1b61d77622016a0762aeea6a6d","title":"Update network.rs for network-specific tuning","description":"Remove/deprecate tx_polling_interval(), add block_time_window_size() method for per-network configuration","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-01T20:04:23.420931964+01:00","updated_at":"2025-12-01T20:04:23.420931964+01:00","source_repo":".","dependencies":[{"issue_id":"blokli-8em","depends_on_id":"blokli-jkz","type":"blocks","created_at":"2025-12-01T20:04:26.052813101+01:00","created_by":"daemon"}]}
{"id":"blokli-8k0","content_hash":"a5a25822143a9c46db7ddd85c796180648351d9a68bcee61100adf174b83f16c","title":"add missing prometheus feature and expose metrics","description":"There are already lots of metrics prepared. Add the missing prometheus feature and make sure its usable.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-07T15:45:44.653031737+01:00","updated_at":"2025-11-07T15:45:44.653031737+01:00","source_repo":"."}
{"id":"blokli-ct0","content_hash":"2049de8068e12a3ee4412b8e90782ae53b270d1296249d23a7fa39fcc1d8cec5","title":"Consider event publication performance optimization","description":"Investigate performance of event publication: 1) Profile event construction overhead, 2) Consider caching frequently accessed data, 3) Evaluate if full GraphQL object is always needed, 4) Add metrics for event publication latency. Questions to answer: How many subscribers are typical? Average event publication latency? Scenarios with very high event rates? Should we batch events? Estimated: 2-4 hours.","status":"open","priority":4,"issue_type":"task","created_at":"2025-11-06T12:38:21.169182267+01:00","updated_at":"2025-11-06T12:38:21.169182267+01:00","source_repo":"."}
{"id":"blokli-dfx","content_hash":"44b6ef633af9bc693da23a7119e0485aa2d4dca5b34a7f62124d8f79f96b055a","title":"Fix compilation warnings in handlers.rs","description":"Remove unused import chain_events::ChainEventType (line 1324), prefix unused variables with underscore (_diff at lines 2004/2110, _decoded at lines 3210/3214), and remove/document unused constant PRICE_PER_PACKET (line 2452). Can run 'cargo fix --lib -p blokli-chain-indexer --tests' for automatic fixes. Estimated: 15 minutes.","status":"open","priority":4,"issue_type":"bug","created_at":"2025-11-06T12:37:47.077741848+01:00","updated_at":"2025-11-06T12:37:47.077741848+01:00","source_repo":"."}
{"id":"blokli-ewg","content_hash":"1911b68ba59240afff4910574b850f7610cbe89bd5c32d59812993c5d64b832b","title":"Full e2e test suite for GraphQL API","description":"Create comprehensive e2e test suite that tests GraphQL API with full integration of indexer and database. Test should: 1) Start Anvil instance, 2) Generate pre-defined set of transactions via GraphQL mutations covering wide range of scenarios, 3) Index logs from transactions and store in database, 4) Perform GraphQL queries and subscriptions to verify data correctness and full integration. This is a major test infrastructure piece.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-11-06T12:41:00.084027248+01:00","updated_at":"2025-11-06T12:41:00.084027248+01:00","source_repo":"."}
{"id":"blokli-hsp","content_hash":"f9987cfa06d112c90a3a56c5a32ce087fb3f378a6a3778781e24e403521f5a97","title":"GraphQL subscriptions integration test with 2-phase protocol","description":"Create integration test that specifically covers GraphQL subscriptions and ensures the 2-phase protocol works correctly. This test should verify subscription lifecycle, event delivery, and protocol compliance. Related to full e2e test suite but focused specifically on subscription mechanics.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-11-06T12:41:09.165586379+01:00","updated_at":"2025-11-06T12:41:09.165586379+01:00","source_repo":".","dependencies":[{"issue_id":"blokli-hsp","depends_on_id":"blokli-ewg","type":"related","created_at":"2025-11-06T12:41:26.359933258+01:00","created_by":"daemon"}]}
{"id":"blokli-jkz","content_hash":"1edfcd33c8fba6650f99694a3fd9d05b5abcddc8fc73a788b0eef43d37507b4b","title":"Add configuration options","description":"Update bloklid/config.rs with new RPC config fields and update example-config.toml with defaults and documentation","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-01T20:04:23.41394715+01:00","updated_at":"2025-12-01T20:04:23.41394715+01:00","source_repo":".","dependencies":[{"issue_id":"blokli-jkz","depends_on_id":"blokli-0w4","type":"blocks","created_at":"2025-12-01T20:04:26.04525789+01:00","created_by":"daemon"}]}
{"id":"blokli-l72","content_hash":"6266906db0944433f9cb2c5c81f5124127ffc32383b363153b0c6641aede4f70","title":"Docker compose setup for local testing","description":"Create Docker compose setup for local testing that: 1) Starts Postgres DB, 2) Starts blokli instances configured to use the DB and index Rotsee network, 3) Uses locally built blokli image, 4) Includes local Docker registry for pushing and using blokli image. This enables easy local testing and development with full infrastructure.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-06T12:41:15.70624662+01:00","updated_at":"2025-11-06T12:41:15.70624662+01:00","source_repo":"."}
{"id":"blokli-lbw","content_hash":"37071111fa30a8be4ada71caa93da2ff39a4fa406ca5141d9f89b97ecbc4f68b","title":"Run full test suite verification","description":"Run full test suite to verify all tests pass: 'just test', 'cargo test --package blokli-chain-indexer'. Verify: all unit tests, state tests, handlers tests (now unblocked), block tests, config tests, snapshot tests. No test timeouts or hangs. CI/CD pipeline passes. Estimated: 30 minutes. NOTE: Was blocked by hanging handler tests, now unblocked\\!","status":"open","priority":0,"issue_type":"task","created_at":"2025-11-06T12:37:53.99435551+01:00","updated_at":"2025-11-06T12:37:53.99435551+01:00","source_repo":"."}
{"id":"blokli-mqs","content_hash":"d7872ea96e5bfde4cf94634461279c93918f8a1f511698064bbb43568f6b018c","title":"Validate and test with just quick","description":"Run formatting, linting, and compilation checks to ensure code quality","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-01T20:04:23.435394263+01:00","updated_at":"2025-12-01T20:04:23.435394263+01:00","source_repo":".","dependencies":[{"issue_id":"blokli-mqs","depends_on_id":"blokli-pai","type":"blocks","created_at":"2025-12-01T20:04:26.068031143+01:00","created_by":"daemon"}]}
{"id":"blokli-pai","content_hash":"53bbca38bea1bb2b7873eedff6a9af7329ea15005e59b6211974456e90ef0737","title":"Write integration tests","description":"Test block time tracking with mocked block fetching, verify dynamic polling interval adaptation, test chain reorg reset","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-01T20:04:23.428215045+01:00","updated_at":"2025-12-01T20:04:23.428215045+01:00","source_repo":".","dependencies":[{"issue_id":"blokli-pai","depends_on_id":"blokli-3s7","type":"blocks","created_at":"2025-12-01T20:04:26.060470012+01:00","created_by":"daemon"}]}
{"id":"blokli-qab","content_hash":"d03f756d145f2c537faf6397bb1b4b5987c6871d02060769c4bfc0f8bc534947","title":"Re-enable and refactor integration tests","description":"Integration tests in chain/indexer/tests/indexer_integration_test.rs were disabled due to API changes from removing chain-actions crate. Tests are wrapped in #[cfg(disabled_pending_refactor)]. See INTEGRATION_TEST_REFACTOR.md for detailed plan. Estimated: 10-15 hours across 4 phases.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-06T12:37:40.543695629+01:00","updated_at":"2025-11-06T12:37:40.543695629+01:00","source_repo":"."}
{"id":"blokli-ufv","content_hash":"7c41a33c67e0158454a116feec86849f6690824f214dda0a2f0a17d6a3f8a270","title":"Dynamic Block Time Polling with Moving Average","description":"Replace statically configured expected_block_time with dynamic system tracking actual block times using configurable moving average (default: last 10 blocks, starting value: 1 second). Components: BlockTimeTracker module, RpcOperationsConfig updates, indexer polling logic, config changes, unit \u0026 integration tests.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-01T20:04:13.560045741+01:00","updated_at":"2025-12-01T20:04:13.560045741+01:00","source_repo":".","dependencies":[{"issue_id":"blokli-ufv","depends_on_id":"blokli-3ca","type":"blocks","created_at":"2025-12-01T20:04:28.259306195+01:00","created_by":"daemon"},{"issue_id":"blokli-ufv","depends_on_id":"blokli-0w4","type":"blocks","created_at":"2025-12-01T20:04:28.267196713+01:00","created_by":"daemon"},{"issue_id":"blokli-ufv","depends_on_id":"blokli-3s7","type":"blocks","created_at":"2025-12-01T20:04:28.275082743+01:00","created_by":"daemon"},{"issue_id":"blokli-ufv","depends_on_id":"blokli-jkz","type":"blocks","created_at":"2025-12-01T20:04:28.282702534+01:00","created_by":"daemon"},{"issue_id":"blokli-ufv","depends_on_id":"blokli-8em","type":"blocks","created_at":"2025-12-01T20:04:28.290218782+01:00","created_by":"daemon"},{"issue_id":"blokli-ufv","depends_on_id":"blokli-pai","type":"blocks","created_at":"2025-12-01T20:04:28.297923292+01:00","created_by":"daemon"},{"issue_id":"blokli-ufv","depends_on_id":"blokli-mqs","type":"blocks","created_at":"2025-12-01T20:04:28.30558376+01:00","created_by":"daemon"}]}
