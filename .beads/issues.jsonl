{"id":"blokli-0rh","content_hash":"69cfc1fdde8e6f00e6bbc726892ee347400dfad6863040c9b4c0c76d7dfb5c7c","title":"use runtime-tokio by default always","description":"Configure the runtime-tokio feature to be used by default so it does not have to be specified explicitely for cargo on the CLI always.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-07T15:45:04.265162485+01:00","updated_at":"2025-11-07T15:45:04.265162485+01:00","source_repo":"."}
{"id":"blokli-0rm","content_hash":"d289277309f6ea7dd75bc14405ec370c99d97f8a106e09699ee5776ed21032af","title":"Update handler test documentation","description":"Document event capture pattern in handlers.rs test module. Add examples of using init_handlers_with_events(), document when to use try_recv_event() vs recv().await, add notes about is_synced parameter for event publication. See TODO.md for example documentation template. Estimated: 30 minutes.","status":"open","priority":4,"issue_type":"task","created_at":"2025-11-06T12:38:05.787103362+01:00","updated_at":"2025-11-06T12:38:05.787103362+01:00","source_repo":"."}
{"id":"blokli-182","content_hash":"a5d471e781ad3401bff30c4fae70824f29742bbcf309b8b45be77fdb244ca7a6","title":"Fix hanging handler tests","description":"COMPLETED: Fixed transaction isolation deadlock where construct_account_update() used a new database connection that couldn't see uncommitted transaction data. Updated to use ConnectionTrait and pass tx.as_ref(). All three announcement tests now pass. Files modified: handlers.rs, account_aggregation.rs, indexer_integration_test.rs. Actual effort: 2 hours.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-11-06T12:38:36.763064881+01:00","updated_at":"2025-11-06T12:38:57.812791547+01:00","closed_at":"2025-11-06T12:38:57.812791547+01:00","source_repo":"."}
{"id":"blokli-77w","content_hash":"d3e47aa715027fa866d9eec9831975045f996ec48ccab81648b70841aad1eddf","title":"native and hopr balance support","description":"The GraphQL API allows querying of hopr and native balances. This only makes sense to support for HOPR safes, HOPR node EOA accounts and the channels contract.\nEven then the amount of chain logs which would have to be stored is a lot. Thus blokli uses the following approach. \nDuring initial sync transfer logs (ERC20) and transfer transactions (native) are completely ignored. Once synched the indexer also subscribes to these events. \nInternally blokli keeps an in-memory set of addresses which combines all known HOPR safe addresses, EOA addresses and the channels contract address. \nOnce an ERC20 transfer event is being handled, it will check against this set of addresses. \nIf the address is known, the balance will be fetched from chain via the RPC (sync operation) and the result stored in the in-memory data structure. If a balance is fetched via the GraphQL API it will try to read the balance from the data structure. If the key is not present, an error will be returned. If the key (address) is present and no balance is known yet, it will be fetched directly from the RPC (sync operation), stored in the data structure and returned to the API caller. If the balance is known, it will be returned directly.\nA similar approach is taken for native transfers. For these the indexer\nsubscribes to new blocks and checks all transactions in a new block for known\naddresses. If a known address is found, the native balance is fetched from chain\nvia the RPC (sync operation) and the result stored in the in-memory data\nstructure. The GraphQL API behaves the same way as for ERC20 balances.\n","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-06T14:32:00.707979111+01:00","updated_at":"2025-11-06T15:05:04.217358458+01:00","source_repo":"."}
{"id":"blokli-8k0","content_hash":"a5a25822143a9c46db7ddd85c796180648351d9a68bcee61100adf174b83f16c","title":"add missing prometheus feature and expose metrics","description":"There are already lots of metrics prepared. Add the missing prometheus feature and make sure its usable.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-07T15:45:44.653031737+01:00","updated_at":"2025-11-07T15:45:44.653031737+01:00","source_repo":"."}
{"id":"blokli-ct0","content_hash":"2049de8068e12a3ee4412b8e90782ae53b270d1296249d23a7fa39fcc1d8cec5","title":"Consider event publication performance optimization","description":"Investigate performance of event publication: 1) Profile event construction overhead, 2) Consider caching frequently accessed data, 3) Evaluate if full GraphQL object is always needed, 4) Add metrics for event publication latency. Questions to answer: How many subscribers are typical? Average event publication latency? Scenarios with very high event rates? Should we batch events? Estimated: 2-4 hours.","status":"open","priority":4,"issue_type":"task","created_at":"2025-11-06T12:38:21.169182267+01:00","updated_at":"2025-11-06T12:38:21.169182267+01:00","source_repo":"."}
{"id":"blokli-dfx","content_hash":"44b6ef633af9bc693da23a7119e0485aa2d4dca5b34a7f62124d8f79f96b055a","title":"Fix compilation warnings in handlers.rs","description":"Remove unused import chain_events::ChainEventType (line 1324), prefix unused variables with underscore (_diff at lines 2004/2110, _decoded at lines 3210/3214), and remove/document unused constant PRICE_PER_PACKET (line 2452). Can run 'cargo fix --lib -p blokli-chain-indexer --tests' for automatic fixes. Estimated: 15 minutes.","status":"open","priority":4,"issue_type":"bug","created_at":"2025-11-06T12:37:47.077741848+01:00","updated_at":"2025-11-06T12:37:47.077741848+01:00","source_repo":"."}
{"id":"blokli-ewg","content_hash":"1911b68ba59240afff4910574b850f7610cbe89bd5c32d59812993c5d64b832b","title":"Full e2e test suite for GraphQL API","description":"Create comprehensive e2e test suite that tests GraphQL API with full integration of indexer and database. Test should: 1) Start Anvil instance, 2) Generate pre-defined set of transactions via GraphQL mutations covering wide range of scenarios, 3) Index logs from transactions and store in database, 4) Perform GraphQL queries and subscriptions to verify data correctness and full integration. This is a major test infrastructure piece.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-11-06T12:41:00.084027248+01:00","updated_at":"2025-11-06T12:41:00.084027248+01:00","source_repo":"."}
{"id":"blokli-g2g","content_hash":"bfb053edfa484ba4f6109cf77f5c8e5b1dbc227715edb1de3714b5163918bf3b","title":"Refactor handlers.rs into smaller files","description":"The handlers.rs has become quite big. Split up each handler group (group by contract) into separate files. Also move the tests accordingly into the respective new files. Ensure compilation keeps working and all tests keep passing.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T13:11:17.000838343+01:00","updated_at":"2025-11-06T20:24:16.609615788+01:00","closed_at":"2025-11-06T20:24:16.609615788+01:00","source_repo":"."}
{"id":"blokli-ga7","content_hash":"d9461642a6166df26c2d62205a7cd68d6cee8a815d66d07b94c347da4685e76c","title":"passthrough balance checking","description":"As an initial approach when a balance query is made through the GrahQL API,\nblokli makes an RPC call on-chain to check the balance of the address (native,\nor ERC20) and returns it directly to the caller. No storage for balances is\ndone.\n\nEnsure unit test coverage of the API for balance queries, as well the RPC calls.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-06T15:00:21.307754817+01:00","updated_at":"2025-11-07T13:33:25.805716043+01:00","closed_at":"2025-11-07T13:33:25.805716043+01:00","source_repo":"."}
{"id":"blokli-hsp","content_hash":"f9987cfa06d112c90a3a56c5a32ce087fb3f378a6a3778781e24e403521f5a97","title":"GraphQL subscriptions integration test with 2-phase protocol","description":"Create integration test that specifically covers GraphQL subscriptions and ensures the 2-phase protocol works correctly. This test should verify subscription lifecycle, event delivery, and protocol compliance. Related to full e2e test suite but focused specifically on subscription mechanics.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-11-06T12:41:09.165586379+01:00","updated_at":"2025-11-06T12:41:09.165586379+01:00","source_repo":".","dependencies":[{"issue_id":"blokli-hsp","depends_on_id":"blokli-ewg","type":"related","created_at":"2025-11-06T12:41:26.359933258+01:00","created_by":"daemon"}]}
{"id":"blokli-l72","content_hash":"6266906db0944433f9cb2c5c81f5124127ffc32383b363153b0c6641aede4f70","title":"Docker compose setup for local testing","description":"Create Docker compose setup for local testing that: 1) Starts Postgres DB, 2) Starts blokli instances configured to use the DB and index Rotsee network, 3) Uses locally built blokli image, 4) Includes local Docker registry for pushing and using blokli image. This enables easy local testing and development with full infrastructure.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-06T12:41:15.70624662+01:00","updated_at":"2025-11-06T12:41:15.70624662+01:00","source_repo":"."}
{"id":"blokli-lbw","content_hash":"37071111fa30a8be4ada71caa93da2ff39a4fa406ca5141d9f89b97ecbc4f68b","title":"Run full test suite verification","description":"Run full test suite to verify all tests pass: 'just test', 'cargo test --package blokli-chain-indexer'. Verify: all unit tests, state tests, handlers tests (now unblocked), block tests, config tests, snapshot tests. No test timeouts or hangs. CI/CD pipeline passes. Estimated: 30 minutes. NOTE: Was blocked by hanging handler tests, now unblocked\\!","status":"open","priority":0,"issue_type":"task","created_at":"2025-11-06T12:37:53.99435551+01:00","updated_at":"2025-11-06T12:37:53.99435551+01:00","source_repo":"."}
{"id":"blokli-ljj","content_hash":"15f9242890b1c9b045fa55bbc5388139b8bb539b7f5c06dab8c626240ce02965","title":"Delayed GraphQL API usability","description":"Even though the API starts before the indexer, the GraphQL part should not be usable yet. In fact, the graphql API should only be usable when the /readyz endpoint also considers the server ready.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-28T16:03:28.455437244+01:00","updated_at":"2025-11-28T16:03:28.455437244+01:00","source_repo":"."}
{"id":"blokli-qab","content_hash":"d03f756d145f2c537faf6397bb1b4b5987c6871d02060769c4bfc0f8bc534947","title":"Re-enable and refactor integration tests","description":"Integration tests in chain/indexer/tests/indexer_integration_test.rs were disabled due to API changes from removing chain-actions crate. Tests are wrapped in #[cfg(disabled_pending_refactor)]. See INTEGRATION_TEST_REFACTOR.md for detailed plan. Estimated: 10-15 hours across 4 phases.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-06T12:37:40.543695629+01:00","updated_at":"2025-11-06T12:37:40.543695629+01:00","source_repo":"."}
{"id":"blokli-qvd","content_hash":"83034f947c689d5eab49d053cdac8e455a50aa33e6669e55cef93e504babd609","title":"refactor smoke test bash script","description":"Improve the bash script which is used to run smoke tests. Consolidate the retry logic and improve readability. Ensure the smoke tests still work by running the smoke tests at then end and ensure they pass.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-28T16:01:15.371981315+01:00","updated_at":"2025-11-28T16:01:15.371981315+01:00","source_repo":"."}
