[workspace]

resolver = "2"

members = [
  "blokli-api",
  "bloklid",
  "chain/actions",
  "chain/api",
  "chain/indexer",
  "chain/rpc",
  "chain/types",
  "db/api",
  "db/entity",
  "db/migration",
  "db/sql",
]

[workspace.dependencies]
alloy = { version = "=1.0.37", default-features = false, features = [
  "contract",
  "essentials",
  "json-rpc",
  "k256",
  "node-bindings",
  "std",
] }
anyhow = "1.0.99"
async-channel = "2.5.0"
async-compression = "0.4.30"
async-graphql = { version = "7.0.14", features = ["chrono", "dataloader"] }
async-graphql-axum = "7.0.14"
async-lock = "3.4.1"
async-signal = "0.2.12"
async-stream = "0.3.6"
async-tar = "0.5.0"
async-trait = "0.1.89"
axum = { version = "0.8.4", features = ["http2", "ws"] }
axum-extra = { version = "0.10.1", features = ["query"] }
backon = { version = "1.5.2", default-features = false }
bincode = "2.0.1"
blokli-chain-actions = { path = "chain/actions" }
blokli-chain-api = { path = "chain/api" }
blokli-chain-indexer = { path = "chain/indexer" }
blokli-chain-rpc = { path = "chain/rpc" }
blokli-chain-types = { path = "chain/types" }
blokli-db-api = { path = "db/api" }
blokli-db-entity = { path = "db/entity" }
blokli-db-migration = { path = "db/migration" }
blokli-db-sql = { path = "db/sql" }
chrono = "0.4.42"
clap = { version = "4.5.47", features = ["derive", "env", "string"] }
dashmap = "6.1.0"
env_logger = "0.11.8"
futures = "0.3.31"
futures-timer = "3.0.3"
futures-util = "0.3.31"
hex = "0.4.3"
hex-literal = "1.0.0"
hopr-async-runtime = { git = "https://github.com/hoprnet/hoprnet" }
hopr-bindings = { git = "https://github.com/hoprnet/hoprnet" }
hopr-chain-config = { git = "https://github.com/hoprnet/hoprnet" }
hopr-crypto-packet = { git = "https://github.com/hoprnet/hoprnet" }
hopr-crypto-random = { git = "https://github.com/hoprnet/hoprnet" }
hopr-crypto-types = { git = "https://github.com/hoprnet/hoprnet" }
hopr-internal-types = { git = "https://github.com/hoprnet/hoprnet" }
hopr-metrics = { git = "https://github.com/hoprnet/hoprnet" }
hopr-network-types = { git = "https://github.com/hoprnet/hoprnet" }
hopr-parallelize = { git = "https://github.com/hoprnet/hoprnet" }
hopr-path = { git = "https://github.com/hoprnet/hoprnet" }
hopr-platform = { git = "https://github.com/hoprnet/hoprnet" }
hopr-primitive-types = { git = "https://github.com/hoprnet/hoprnet" }
http = "1.3.1"
lazy_static = "1.5.0"
libp2p-identity = { version = "0.2.12", features = [
  "ed25519",
  "peerid",
  "rand",
] }
mockall = "0.13.1"
mockito = "1.7.0"
moka = { version = "0.12.10", features = ["future"] }
multiaddr = "0.18.2"
num_enum = "0.7.4"
primitive-types = { version = "0.13.1", features = ["serde"] }
rand = "0.9.2" # ignored in renovate, cannot be updated, dependencies reference old ones
reqwest = { version = "0.12.23", features = ["json"] }
ringbuffer = "0.16.0"
rust-stream-ext-concurrent = "1.0.0"
rustls = { version = "0.23", default-features = false, features = ["std"] }
rustls-pemfile = "2.1"
sea-orm = { version = "1.1.14", default-features = false, features = [
  "debug-print",
  "macros",
  "runtime-tokio-rustls",
  "sqlx-postgres",
  "with-chrono",
  "with-json",
] }
sea-orm-cli = { version = "1.1.14", default-features = false, features = [
  "codegen",
] }
sea-orm-migration = { version = "1.1.14", default-features = false, features = [
  "cli",
  "sqlx-postgres",
  "with-chrono",
] }
sea-query = { version = "0.32.7", default-features = false }
sea-query-binder = { version = "0.7.0", default-features = false, features = [
  "sqlx-postgres",
  "with-chrono",
] }
semver = "1.0.26"
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0.143"
serde_with = { version = "3.14.0" }
serde_yaml = "0.9"
smart-default = "0.7.1"
sqlx = { version = "0.8.6", default-features = false, features = [
  "macros",
  "migrate",
  "postgres",
  "runtime-tokio",
  "sqlite",
  "tls-rustls",
] }
strum = { version = "0.27.2", features = ["derive"] }
sysinfo = "0.37.0"
tempfile = "3.22.0"
test-log = { version = "0.2.18", features = ["trace"] }
thiserror = "2.0.16"
tokio = { version = "1.47.1", features = [
  "fs",
  "macros",
  "rt-multi-thread",
  "sync",
  "time",
  "tracing",
] }
tokio-rustls = { version = "0.26", default-features = false, features = [
  "ring",
] }
tokio-test = "0.4"
toml = "0.8.19"
tower = { version = "0.5.2", default-features = false, features = ["util"] }
tower-http = { version = "0.6.2", features = [
  "compression-zstd",
  "cors",
  "trace",
] }
tracing = { version = "0.1.41" }
tracing-subscriber = { version = "0.3.20", features = [
  "env-filter",
  "fmt",
  "registry",
  "std",
] }
tracing-test = { version = "0.2.5", features = ["no-env-filter"] }
url = { version = "2.5.7", features = ["serde"] }
validator = { version = "0.20.0", features = ["derive"] }

[profile.dev]
panic = "abort"

# this profile focuses on the speed of compilation
[profile.candidate]
codegen-units = 16        # normal release default
inherits      = "release"
lto           = false     # do the smallest amount of link-time optimization
opt-level     = 2
panic         = "abort"
strip         = true

# perform minimal optimizations to prevent stack overflows in large tests
[profile.test]
opt-level = 1

# this profile focuses on the best runtime performance and the smallest binary size
[profile.release]
codegen-units = 1
lto           = "fat"
opt-level     = 3
panic         = "abort"
strip         = true
