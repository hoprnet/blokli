[workspace]

resolver = "2"

members = [
  "bloklid"
]

[workspace.dependencies]
alloy = { version = "=1.0.27", default-features = false, features = [
  "essentials",
  "json-rpc",
  "node-bindings",
  "contract",
  "k256",
  "std",
] } # pinned to 1.0.16 due to many breaking changes in patch releases
anyhow = "1.0.99"
async-signal = "0.2.12"
axum = { version = "0.8.4", features = ["ws", "http2"] }
axum-extra = { version = "0.10.1", features = ["query"] }
clap = { version = "4.5.47", features = ["derive", "env", "string"] }
futures = "0.3.31"
serde = { version = "1.0", features = ["derive"] }
serde_with = { version = "3.14.0" }
serde_yaml = "0.9"
smart-default = "0.7.1"
thiserror = "2.0.16"
tokio = { version = "1.47.1", features = [
  "rt-multi-thread",
  "macros",
  "tracing",
  "fs",
  "time",
  "sync",
] }
tower = { version = "0.5.2", default-features = false, features = ["util"] }
tracing = { version = "0.1.41" }
tracing-subscriber = { version = "0.3.20", features = [
  "env-filter",
  "fmt",
  "registry",
  "std",
] }
validator = { version = "0.20.0", features = ["derive"] }

[profile.dev]
panic = "abort"

# this profile focuses on the speed of compilation
[profile.candidate]
inherits = "release"
codegen-units = 16   # normal release default
lto = false          # do the smallest amount of link-time optimization
panic = "abort"
strip = true
opt-level = 2

# perform minimal optimizations to prevent stack overflows in large tests
[profile.test]
opt-level = 1

# this profile focuses on the best runtime performance and the smallest binary size
[profile.release]
codegen-units = 1
lto = "fat"
panic = "abort"
strip = true
opt-level = 3

